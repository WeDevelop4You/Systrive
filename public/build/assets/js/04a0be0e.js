import{F as _}from"./11811950.js";import{n as d}from"./75131b1e.js";import{_ as h}from"./fc149ebf.js";import{b as p,d as n}from"./627c4e78.js";import{_ as f}from"./96c5e212.js";import{_ as c}from"./ce45e77b.js";import{_ as P}from"./b5c144e7.js";import"./feafbc55.js";import"./dfc93a5e.js";import"./f55d25f8.js";import"./717a5e3b.js";import"./4dbee51f.js";import"./0631847e.js";import"./efa8d6c3.js";import"./9ac5599c.js";import"./e05367ee.js";import"./7f872bef.js";import"./26688549.js";import"./0f1ce05e.js";import"./d0d927ab.js";import"./f57264bf.js";import"./d342cd9d.js";import"./7d2f04f0.js";import"./95dd51c2.js";import"./76f91a17.js";import"./3a43f35c.js";import"./1fec3443.js";import"./c395c583.js";import"./06f2725c.js";import"./bb18b195.js";import"./6ccc2df7.js";import"./4b49aa8e.js";import"./87fe7e0c.js";import"./80dcca67.js";import"./e1e1cf59.js";import"./460034c3.js";import"./bca9cab1.js";import"./32586a4b.js";const b={name:"PermissionUserInput",extends:_,data(){return{roles:[],permissions:[],rolesPermissions:[]}},computed:{isViewSelected(){return e=>e===null?!1:!this.permissions.includes(e)},hasRolePermissions(){return e=>this.rolesPermissions.includes(e)}},watch:{permissions:function(){this.data.roles=this.roles.map(e=>e.id),this.data.permissions=this.permissions.filter(e=>!this.rolesPermissions.includes(e))}},created(){this.roles=this.data.roles,this.permissions=this.data.permissions,this.changeRolePermissions(this.data.roles)},methods:{changeRolePermissions(e){let s=e.map(t=>t.permissions);s=s.flat();let i=[...new Set([...this.permissions,...s])],o=this.rolesPermissions.filter(t=>!s.includes(t));this.rolesPermissions=s,this.permissions=i.filter(t=>!o.includes(t))}}};var v=function(){var s=this,i=s._self._c;return i(p,{attrs:{"no-gutters":""}},[i(n,{attrs:{cols:"12"}},[i(h,{attrs:{items:s.component.data.roles,label:s.component.content.label,chips:"",dense:"",outlined:"",multiple:"","small-chips":"","hide-details":"","return-object":"","deletable-chips":"","item-text":"name"},on:{change:s.changeRolePermissions},model:{value:s.roles,callback:function(o){s.roles=o},expression:"roles"}})],1),i(n,{attrs:{cols:"12"}},s._l(s.component.data.groups,function(o,t){return i(p,{key:t,staticClass:"my-0"},[i(n,{staticClass:"pb-0",attrs:{order:"first",cols:"12"}},[i(f,{staticClass:"subtitle-1 px-0",staticStyle:{height:"25px"},domProps:{textContent:s._s(o.name)}})],1),s._l(o.permissions,function(u,l){return[s._l(u,function(r,a){return[l==="view"?i(n,{key:`${t}_${l}_${a}`,staticClass:"py-0",attrs:{cols:"12",order:"0"}},[i(c,{attrs:{value:r.id,label:r.name,disabled:s.hasRolePermissions(r.id),dense:"","hide-details":""},model:{value:s.permissions,callback:function(m){s.permissions=m},expression:"permissions"}})],1):i(n,{key:`${t}_${l}_${a}`,staticClass:"py-0",attrs:{cols:"auto"}},[i(c,{attrs:{value:r.id,label:r.name,disabled:s.isViewSelected(o.id)||s.hasRolePermissions(r.id),"hide-details":"",dense:""},model:{value:s.permissions,callback:function(m){s.permissions=m},expression:"permissions"}})],1)]}),Object.keys(o.permissions).pop()!==l?i(n,{key:`${t}_${l}`,staticClass:"py-0",attrs:{cols:"12"}},[i(P,{staticClass:"mt-2"})],1):s._e()]})],2)}),1)],1)},g=[],C=d(b,v,g,!1,null,null,null,null);const ns=C.exports;export{ns as default};
