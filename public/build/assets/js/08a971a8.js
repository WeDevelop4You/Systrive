var T=(s,t,e)=>{if(!t.has(s))throw TypeError("Cannot "+e)};var a=(s,t,e)=>(T(s,t,"read from private field"),e?e.call(s):t.get(s)),n=(s,t,e)=>{if(t.has(s))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(s):t.set(s,e)},l=(s,t,e,r)=>(T(s,t,"write to private field"),r?r.call(s,e):t.set(s,e),e);var E=(s,t,e)=>(T(s,t,"access private method"),e);import{l as v}from"./5ecbb865.js";const P="create",k="edit",L="show",R=[P,k,L];var o,h,m,f,u,S,_,g,x,A,$;class B{constructor(t,e,r,c){n(this,S);n(this,g);n(this,A);n(this,o,void 0);n(this,h,void 0);n(this,m,void 0);n(this,f,void 0);n(this,u,[]);l(this,o,t),l(this,h,e),l(this,m,r),l(this,f,c),E(this,S,_).call(this)}convertStringToRouteParams(){const t=a(this,m).currentRoute,e=t.params.chapters,r=t.meta.allowedStates||[];if(e!==void 0&&!Array.isArray(e)){const c=e.split("/"),p=c.length;if(p>0)for(let d=0;d<p;){const y=c[d],b={state:y,params:{}},w=()=>{const i=c[++d];return R.includes(i)||d>=p?b.params:(!isNaN(i)&&i%1===0&&i>0?b.params.id=i:b.params.type=i,w())};if(r.includes(y)){const i={state:y,...w()};switch(y){case P:case k:a(this,o).$state.setParams("form",i);break;case L:a(this,o).$state.setParams("show",i);break}a(this,u).push(b)}else d++}}}runStateAction(t){var e;if(a(this,u).length>0){const r=a(this,u).shift();r.params.type!==void 0&&(t=(e=E(this,A,$).call(this,r.params.type))!=null?e:t),a(this,h).dispatch(`${t}/states`,r).catch(()=>{})}}}o=new WeakMap,h=new WeakMap,m=new WeakMap,f=new WeakMap,u=new WeakMap,S=new WeakSet,_=function(){const t=a(this,o),e=a(this,f),r=v.exports.debounce(()=>a(this,h).dispatch("auth/updatePreferences"),1e3);a(this,h).subscribe(c=>{if(c.type==="auth/setPreference"){const p=c.payload.value;switch(c.payload.type){case"dark_mode":e.theme.dark=p,document.documentElement.setAttribute("data-theme",p?"dark":"light")}t.$auth.isLoaded()&&r()}})},g=new WeakSet,x=function(){const t=a(this,o);a(this,h).subscribeAction({before:e=>{t.$activity.addVuexNamespace(e.type)}})},A=new WeakSet,$=function(t){switch(t){case"user":return"company/users";case"role":return"company/roles";case"cms":return"company/cms";case"table":return"cms/table";default:return}};export{B as L,P as S,k as a,L as b,R as c};
