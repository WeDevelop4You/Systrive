import{m as u}from"./30fae2fd.js";import{C as c}from"./0d92c212.js";import{n as d}from"./75131b1e.js";import{_}from"./10077ee1.js";import{a as m,d as n}from"./8ba31e84.js";import{_ as h}from"./90435b0d.js";import{_ as f,a as v}from"./0f53b063.js";import{_ as p}from"./710e1eb2.js";import"./5dd91c54.js";import"./4cf2fa9d.js";import"./3fe3f60d.js";import"./bdd01e8a.js";import"./1c949a44.js";import"./24ed13ab.js";import"./039e00f1.js";import"./a5372d14.js";import"./65a60693.js";import"./335df259.js";import"./80e71617.js";import"./a3716e35.js";import"./6eca2908.js";import"./f57264bf.js";import"./64b64aa2.js";import"./c244e79d.js";import"./e4b06890.js";import"./39b1c9f1.js";import"./03959f41.js";import"./c09151b9.js";import"./f0a47c82.js";import"./bd206a3a.js";const g={name:"CompanyUserForm",mixins:[c],data(){return{roles:[],permissions:[],rolesPermissions:[]}},computed:{isViewSelected(){return t=>t===null?!1:!this.permissions.includes(t)},hasRolePermissions(){return t=>this.rolesPermissions.includes(t)},...u({roleItems:"company/roles/listItems",permissionGroupsItems:"permissions/items"})},watch:{permissions:function(){this.data.roles=this.roles.map(t=>t.id),this.data.permissions=this.permissions.filter(t=>!this.rolesPermissions.includes(t))}},created(){this.$store.getters[`${this.vuexNamespace}/status`]==="ready"&&this.getData(),this.unwatch=this.$store.watch((t,s)=>s[`${this.vuexNamespace}/status`],t=>{switch(t){case"ready":this.getData()}})},beforeDestroy(){this.unwatch()},methods:{getData(){this.roles=this.data.roles,this.permissions=this.data.permissions,this.changeRolePermissions(this.data.roles)},changeRolePermissions(t){let s=t.map(r=>r.permissions);s=s.flat();let e=[...new Set([...this.permissions,...s])],i=this.rolesPermissions.filter(r=>!s.includes(r));this.rolesPermissions=s,this.permissions=e.filter(r=>!i.includes(r))}}};var $=function(){var s=this,e=s._self._c;return e(m,{attrs:{dense:""}},[s.isEditing?s._e():e(n,{attrs:{cols:"12"}},[e(h,{attrs:{"error-messages":s.errors.email,label:s.$vuetify.lang.t("$vuetify.word.email"),dense:"",outlined:"","hide-details":"auto"},on:{input:function(i){return s.clearError("email")}},model:{value:s.data.email,callback:function(i){s.$set(s.data,"email",i)},expression:"data.email"}})],1),e(n,{attrs:{cols:"12"}},[e(_,{attrs:{items:s.roleItems,label:s.$vuetify.lang.t("$vuetify.word.roles"),chips:"",dense:"",outlined:"",multiple:"","small-chips":"","hide-details":"","return-object":"","deletable-chips":"","item-text":"name"},on:{change:s.changeRolePermissions},model:{value:s.roles,callback:function(i){s.roles=i},expression:"roles"}})],1),e(n,{attrs:{cols:"12"}},s._l(s.permissionGroupsItems,function(i,r){return e(m,{key:r,staticClass:"my-0"},[e(n,{staticClass:"pb-0",attrs:{order:"first",cols:"12"}},[e(f,{staticClass:"subtitle-1 px-0",staticStyle:{height:"25px"},domProps:{textContent:s._s(s.$vuetify.lang.t(i.name))}})],1),s._l(i.permissions,function(o,l){return[i.id===o.id?e(n,{key:`${r}_${l}`,staticClass:"py-0",attrs:{cols:"12",order:"0"}},[e(p,{attrs:{value:o.id,label:s.$vuetify.lang.t(o.name),disabled:s.hasRolePermissions(o.id),dense:"","hide-details":""},model:{value:s.permissions,callback:function(a){s.permissions=a},expression:"permissions"}}),e(v,{staticClass:"mt-2"})],1):e(n,{key:`${r}_${l}`,staticClass:"py-0",attrs:{cols:"auto"}},[e(p,{attrs:{value:o.id,label:s.$vuetify.lang.t(o.name),disabled:s.isViewSelected(i.id)||s.hasRolePermissions(o.id),"hide-details":"",dense:""},model:{value:s.permissions,callback:function(a){s.permissions=a},expression:"permissions"}})],1)]})],2)}),1)],1)},y=[],b=d(g,$,y,!1,null,null,null,null);const Y=b.exports;export{Y as default};
