import{F as _}from"./b7c3e2a2.js";import{n as d}from"./75131b1e.js";import{_ as h}from"./49bd9359.js";import{b as p,d as n}from"./aec5129c.js";import{_ as f}from"./30fe9e3e.js";import{_ as c}from"./33779d06.js";import{_ as P}from"./4bb33aa7.js";import"./bdb3efe6.js";import"./241d75a0.js";import"./f55d25f8.js";import"./7aa02009.js";import"./138027c1.js";import"./9fbfad97.js";import"./b23c6efb.js";import"./70b7956e.js";import"./3bb5f4c3.js";import"./65f69356.js";import"./01dc974a.js";import"./0f1ce05e.js";import"./2011fe48.js";import"./f57264bf.js";import"./de3c98b1.js";import"./0458ce8d.js";import"./aa2bb52c.js";import"./0ef2dea0.js";import"./bb74cdc9.js";import"./2355e5ce.js";import"./e3b67d0b.js";import"./e4503c3c.js";import"./489009e5.js";import"./270d8bef.js";import"./8b312de9.js";import"./dd943fa4.js";import"./4885c229.js";import"./910d1024.js";import"./cddab8fd.js";import"./3d76d18f.js";import"./e1bc725c.js";const b={name:"PermissionUserInput",extends:_,data(){return{roles:[],permissions:[],rolesPermissions:[]}},computed:{isViewSelected(){return e=>e===null?!1:!this.permissions.includes(e)},hasRolePermissions(){return e=>this.rolesPermissions.includes(e)}},watch:{permissions:function(){this.data.roles=this.roles.map(e=>e.id),this.data.permissions=this.permissions.filter(e=>!this.rolesPermissions.includes(e))}},created(){this.roles=this.data.roles,this.permissions=this.data.permissions,this.changeRolePermissions(this.data.roles)},methods:{changeRolePermissions(e){let s=e.map(t=>t.permissions);s=s.flat();let i=[...new Set([...this.permissions,...s])],o=this.rolesPermissions.filter(t=>!s.includes(t));this.rolesPermissions=s,this.permissions=i.filter(t=>!o.includes(t))}}};var v=function(){var s=this,i=s._self._c;return i(p,{attrs:{"no-gutters":""}},[i(n,{attrs:{cols:"12"}},[i(h,{attrs:{items:s.component.data.roles,label:s.component.content.label,chips:"",dense:"",outlined:"",multiple:"","small-chips":"","hide-details":"","return-object":"","deletable-chips":"","item-text":"name"},on:{change:s.changeRolePermissions},model:{value:s.roles,callback:function(o){s.roles=o},expression:"roles"}})],1),i(n,{attrs:{cols:"12"}},s._l(s.component.data.groups,function(o,t){return i(p,{key:t,staticClass:"my-0"},[i(n,{staticClass:"pb-0",attrs:{order:"first",cols:"12"}},[i(f,{staticClass:"subtitle-1 px-0",staticStyle:{height:"25px"},domProps:{textContent:s._s(o.name)}})],1),s._l(o.permissions,function(u,l){return[s._l(u,function(r,a){return[l==="view"?i(n,{key:`${t}_${l}_${a}`,staticClass:"py-0",attrs:{cols:"12",order:"0"}},[i(c,{attrs:{value:r.id,label:r.name,disabled:s.hasRolePermissions(r.id),dense:"","hide-details":""},model:{value:s.permissions,callback:function(m){s.permissions=m},expression:"permissions"}})],1):i(n,{key:`${t}_${l}_${a}`,staticClass:"py-0",attrs:{cols:"auto"}},[i(c,{attrs:{value:r.id,label:r.name,disabled:s.isViewSelected(o.id)||s.hasRolePermissions(r.id),"hide-details":"",dense:""},model:{value:s.permissions,callback:function(m){s.permissions=m},expression:"permissions"}})],1)]}),Object.keys(o.permissions).pop()!==l?i(n,{key:`${t}_${l}`,staticClass:"py-0",attrs:{cols:"12"}},[i(P,{staticClass:"mt-2"})],1):s._e()]})],2)}),1)],1)},g=[],C=d(b,v,g,!1,null,null,null,null);const ns=C.exports;export{ns as default};
