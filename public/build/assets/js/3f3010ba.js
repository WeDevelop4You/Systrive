import{F as _}from"./2a42de1a.js";import{n as d}from"./75131b1e.js";import{_ as h}from"./d6e1396f.js";import{b as p,d as n}from"./e0db1d00.js";import{_ as f}from"./b17e7ff8.js";import{_ as c}from"./c61d1d6c.js";import{_ as P}from"./be706740.js";import"./5ecbb865.js";import"./35f22181.js";import"./f55d25f8.js";import"./2988b03e.js";import"./c71827a8.js";import"./76252812.js";import"./16a5c7a5.js";import"./63395702.js";import"./10723b79.js";import"./4d23891e.js";import"./e4160f91.js";import"./0f1ce05e.js";import"./00924962.js";import"./f57264bf.js";import"./4f3425ab.js";import"./62678420.js";import"./a097d4c0.js";import"./165252c7.js";import"./c1698eeb.js";import"./8f3521ec.js";import"./0e939e68.js";import"./ed6ab0a1.js";import"./89ff418b.js";import"./f72d6ec9.js";import"./23e0ddc0.js";import"./8c509b8f.js";import"./f5ffbe96.js";import"./6738fc27.js";import"./4138e54f.js";import"./caa09a2a.js";import"./fa8fc16c.js";const b={name:"PermissionUserInput",extends:_,data(){return{roles:[],permissions:[],rolesPermissions:[]}},computed:{isViewSelected(){return e=>e===null?!1:!this.permissions.includes(e)},hasRolePermissions(){return e=>this.rolesPermissions.includes(e)}},watch:{permissions:function(){this.data.roles=this.roles.map(e=>e.id),this.data.permissions=this.permissions.filter(e=>!this.rolesPermissions.includes(e))}},created(){this.roles=this.data.roles,this.permissions=this.data.permissions,this.changeRolePermissions(this.data.roles)},methods:{changeRolePermissions(e){let s=e.map(t=>t.permissions);s=s.flat();let i=[...new Set([...this.permissions,...s])],o=this.rolesPermissions.filter(t=>!s.includes(t));this.rolesPermissions=s,this.permissions=i.filter(t=>!o.includes(t))}}};var v=function(){var s=this,i=s._self._c;return i(p,{attrs:{"no-gutters":""}},[i(n,{attrs:{cols:"12"}},[i(h,{attrs:{items:s.component.data.roles,label:s.component.content.label,chips:"",dense:"",outlined:"",multiple:"","small-chips":"","hide-details":"","return-object":"","deletable-chips":"","item-text":"name"},on:{change:s.changeRolePermissions},model:{value:s.roles,callback:function(o){s.roles=o},expression:"roles"}})],1),i(n,{attrs:{cols:"12"}},s._l(s.component.data.groups,function(o,t){return i(p,{key:t,staticClass:"my-0"},[i(n,{staticClass:"pb-0",attrs:{order:"first",cols:"12"}},[i(f,{staticClass:"subtitle-1 px-0",staticStyle:{height:"25px"},domProps:{textContent:s._s(o.name)}})],1),s._l(o.permissions,function(u,l){return[s._l(u,function(r,a){return[l==="view"?i(n,{key:`${t}_${l}_${a}`,staticClass:"py-0",attrs:{cols:"12",order:"0"}},[i(c,{attrs:{value:r.id,label:r.name,disabled:s.hasRolePermissions(r.id),dense:"","hide-details":""},model:{value:s.permissions,callback:function(m){s.permissions=m},expression:"permissions"}})],1):i(n,{key:`${t}_${l}_${a}`,staticClass:"py-0",attrs:{cols:"auto"}},[i(c,{attrs:{value:r.id,label:r.name,disabled:s.isViewSelected(o.id)||s.hasRolePermissions(r.id),"hide-details":"",dense:""},model:{value:s.permissions,callback:function(m){s.permissions=m},expression:"permissions"}})],1)]}),Object.keys(o.permissions).pop()!==l?i(n,{key:`${t}_${l}`,staticClass:"py-0",attrs:{cols:"12"}},[i(P,{staticClass:"mt-2"})],1):s._e()]})],2)}),1)],1)},g=[],C=d(b,v,g,!1,null,null,null,null);const ns=C.exports;export{ns as default};
