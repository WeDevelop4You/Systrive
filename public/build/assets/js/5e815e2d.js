import{F as _}from"./40b96a79.js";import{n as d}from"./75131b1e.js";import{_ as h}from"./e83c81e5.js";import{b as p,d as n}from"./dcc38a7c.js";import{_ as f}from"./3f0873a2.js";import{_ as c}from"./0efed673.js";import{_ as P}from"./8e2d7f23.js";import"./12a8f78c.js";import"./e63a8b3a.js";import"./f55d25f8.js";import"./2de5bdf0.js";import"./69c0631b.js";import"./c8f02950.js";import"./517420cd.js";import"./fe993f4a.js";import"./887f6627.js";import"./6dc30b97.js";import"./bda96ba9.js";import"./0f1ce05e.js";import"./4516f3b3.js";import"./f57264bf.js";import"./aeff811c.js";import"./f03d37af.js";import"./12d57222.js";import"./42aaffeb.js";import"./8dd6728f.js";import"./1b9ea462.js";import"./068f7ff1.js";import"./2610d196.js";import"./0a0e57c8.js";import"./63539db6.js";import"./4e01a737.js";import"./dd17033c.js";import"./da1824ff.js";import"./d4d55fcc.js";import"./6590abf9.js";import"./d2e49a62.js";import"./1f7af962.js";const b={name:"PermissionUserInput",extends:_,data(){return{roles:[],permissions:[],rolesPermissions:[]}},computed:{isViewSelected(){return e=>e===null?!1:!this.permissions.includes(e)},hasRolePermissions(){return e=>this.rolesPermissions.includes(e)}},watch:{permissions:function(){this.data.roles=this.roles.map(e=>e.id),this.data.permissions=this.permissions.filter(e=>!this.rolesPermissions.includes(e))}},created(){this.roles=this.data.roles,this.permissions=this.data.permissions,this.changeRolePermissions(this.data.roles)},methods:{changeRolePermissions(e){let s=e.map(t=>t.permissions);s=s.flat();let i=[...new Set([...this.permissions,...s])],o=this.rolesPermissions.filter(t=>!s.includes(t));this.rolesPermissions=s,this.permissions=i.filter(t=>!o.includes(t))}}};var v=function(){var s=this,i=s._self._c;return i(p,{attrs:{"no-gutters":""}},[i(n,{attrs:{cols:"12"}},[i(h,{attrs:{items:s.component.data.roles,label:s.component.content.label,chips:"",dense:"",outlined:"",multiple:"","small-chips":"","hide-details":"","return-object":"","deletable-chips":"","item-text":"name"},on:{change:s.changeRolePermissions},model:{value:s.roles,callback:function(o){s.roles=o},expression:"roles"}})],1),i(n,{attrs:{cols:"12"}},s._l(s.component.data.groups,function(o,t){return i(p,{key:t,staticClass:"my-0"},[i(n,{staticClass:"pb-0",attrs:{order:"first",cols:"12"}},[i(f,{staticClass:"subtitle-1 px-0",staticStyle:{height:"25px"},domProps:{textContent:s._s(o.name)}})],1),s._l(o.permissions,function(u,l){return[s._l(u,function(r,a){return[l==="view"?i(n,{key:`${t}_${l}_${a}`,staticClass:"py-0",attrs:{cols:"12",order:"0"}},[i(c,{attrs:{value:r.id,label:r.name,disabled:s.hasRolePermissions(r.id),dense:"","hide-details":""},model:{value:s.permissions,callback:function(m){s.permissions=m},expression:"permissions"}})],1):i(n,{key:`${t}_${l}_${a}`,staticClass:"py-0",attrs:{cols:"auto"}},[i(c,{attrs:{value:r.id,label:r.name,disabled:s.isViewSelected(o.id)||s.hasRolePermissions(r.id),"hide-details":"",dense:""},model:{value:s.permissions,callback:function(m){s.permissions=m},expression:"permissions"}})],1)]}),Object.keys(o.permissions).pop()!==l?i(n,{key:`${t}_${l}`,staticClass:"py-0",attrs:{cols:"12"}},[i(P,{staticClass:"mt-2"})],1):s._e()]})],2)}),1)],1)},g=[],C=d(b,v,g,!1,null,null,null,null);const ns=C.exports;export{ns as default};
