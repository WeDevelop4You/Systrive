import{D as n}from"./cba78c50.js";import{F as p,_ as m}from"./1ca1b458.js";import{n as l}from"./75131b1e.js";import"./31bc7601.js";import"./b6e399d2.js";import"./241d75a0.js";import"./bdb3efe6.js";import"./b40aa1bd.js";import"./aec5129c.js";import"./30be8c11.js";import"./8b312de9.js";import"./0d8232c6.js";import"./65f69356.js";import"./bb01eec6.js";import"./aa2bb52c.js";import"./db4c5add.js";import"./bbc3bc1d.js";import"./151ecba3.js";import"./5cf30ec0.js";import"./70b7956e.js";import"./3bb5f4c3.js";import"./01dc974a.js";import"./0ef2dea0.js";import"./2011fe48.js";import"./aa3d4970.js";import"./4ecb9a04.js";import"./b6800438.js";import"./b23c6efb.js";import"./4e376a1b.js";import"./2355e5ce.js";import"./f57264bf.js";import"./e3b67d0b.js";import"./e4503c3c.js";import"./489009e5.js";import"./138027c1.js";import"./9fbfad97.js";import"./0f1ce05e.js";import"./de3c98b1.js";import"./0458ce8d.js";import"./b7bc7979.js";import"./b7c3e2a2.js";import"./f55d25f8.js";function d(r){return{namespaced:!0,state:()=>({queue:[],coordinates:{}}),getters:{file(e){return e.queue.at(0)},coordinates(e){return e.coordinates}},mutations:{add(e,t){e.queue.push(t),r.modalCallback.call(this,!0)},setCoordinates(e,t){e.coordinates=t},remove(e){e.coordinates={},e.queue.splice(0,1),r.modalCallback.call(this,e.queue.length>0)}},actions:{cancel({commit:e}){e("remove")},save({commit:e,getters:t}){r.uploaderCallback.call(this,t.file,t.coordinates).then(()=>{e("remove")})}}}}const c={name:"ImageInput",components:{Dialog:n},extends:p,data(){return{dialog:this.value.data.dialog,vuexCropperNamespace:this.value.data.vuexCropperNamespace}},created(){this.$store.hasModule(this.getPath())||this.$store.registerModule(this.getPath(),d({modalCallback:r=>this.dialog.data.show=r,uploaderCallback:(r,{width:e,height:t,left:a,top:i})=>{const o=this.createFormData(r),s=this.createProgress(r.size);return o.append("width",e),o.append("height",t),o.append("left",a),o.append("top",i),this.uploader(o,s)}}))},beforeDestroy(){this.$store.unregisterModule(this.getPath())},methods:{getPath(){return this.vuexCropperNamespace.split("/")},handler(r){const e=`${this.vuexCropperNamespace}/add`;r instanceof Array?r.forEach(t=>{this.files.length<this.max&&this.$store.commit(e,t)}):this.$store.commit(e,r)}}};var u=function(){var e=this,t=e._self._c;return t("div",[t(m,e._b({class:[{"v-input-hidden":!e.isHidden},e.component.attributes.class],attrs:{clearable:!1,disabled:e.isDisabled||e.files.length>=e.max,label:e.component.content.label,"error-messages":e.errorMessages,error:e.component.data.error&&e.error,"hide-details":e.hideDetails},on:{change:e.handler},scopedSlots:e._u([{key:"selection",fn:function({index:a}){return[a===0?t("span",{staticClass:"text--secondary"},[e._v(" "+e._s(e.component.attributes.placeholder)+" ")]):e._e()]}}])},"v-file-input",e.component.attributes,!1)),t("files",{attrs:{max:e.max,files:e.files,"is-disabled":e.isDisabled},on:{remove:e.remove}}),t("Dialog",{attrs:{value:e.dialog}})],1)},h=[],f=l(c,u,h,!1,null,null,null,null);const ae=f.exports;export{ae as default};
