import{m as d}from"./6208e2c9.js";import{C as _}from"./3e51f459.js";import{n as f}from"./75131b1e.js";import{_ as h}from"./8db0cb22.js";import{b as p,d as o}from"./590a28b7.js";import{_ as v}from"./068f1a9e.js";import{_ as y,a as $}from"./266fe377.js";import{_ as u}from"./19b8ef91.js";import"./e563f8fc.js";import"./984ae399.js";import"./f840dfc1.js";import"./cafb4e72.js";import"./15010e3a.js";import"./58bb7c08.js";import"./6bd6fa12.js";import"./f2966feb.js";import"./17ad2ca9.js";import"./300db687.js";import"./d2ef4c5f.js";import"./f57264bf.js";import"./cbc1dd73.js";import"./57a61d6a.js";import"./99aee185.js";import"./60c8b0b9.js";import"./de067bf9.js";import"./ed0b44fa.js";import"./0f1ce05e.js";import"./ae027585.js";import"./f4d12362.js";import"./36b9b828.js";import"./e656fdfb.js";import"./2cf78807.js";import"./79032494.js";import"./21c07f9a.js";import"./d291a8b0.js";import"./acd73603.js";const b={name:"CompanyUserForm",mixins:[_],data(){return{roles:[],permissions:[],rolesPermissions:[]}},computed:{isViewSelected(){return i=>i===null?!1:!this.permissions.includes(i)},hasRolePermissions(){return i=>this.rolesPermissions.includes(i)},...d({roleItems:"company/roles/listItems",permissionGroupsItems:"permissions/items"})},watch:{permissions:function(){this.data.roles=this.roles.map(i=>i.id),this.data.permissions=this.permissions.filter(i=>!this.rolesPermissions.includes(i))}},created(){this.roles=this.data.roles,this.permissions=this.data.permissions,this.changeRolePermissions(this.data.roles)},methods:{changeRolePermissions(i){let s=i.map(r=>r.permissions);s=s.flat();let e=[...new Set([...this.permissions,...s])],t=this.rolesPermissions.filter(r=>!s.includes(r));this.rolesPermissions=s,this.permissions=e.filter(r=>!t.includes(r))}}};var g=function(){var s=this,e=s._self._c;return e(p,{attrs:{dense:""}},[s.isEditing?s._e():e(o,{attrs:{cols:"12"}},[e(v,{attrs:{"error-messages":s.errors.email,label:s.$vuetify.lang.t("$vuetify.word.email"),dense:"",outlined:"","hide-details":"auto"},on:{input:function(t){return s.clearError("email")}},model:{value:s.data.email,callback:function(t){s.$set(s.data,"email",t)},expression:"data.email"}})],1),e(o,{attrs:{cols:"12"}},[e(h,{attrs:{items:s.roleItems,label:s.$vuetify.lang.t("$vuetify.word.roles"),chips:"",dense:"",outlined:"",multiple:"","small-chips":"","hide-details":"","return-object":"","deletable-chips":"","item-text":"name"},on:{change:s.changeRolePermissions},model:{value:s.roles,callback:function(t){s.roles=t},expression:"roles"}})],1),e(o,{attrs:{cols:"12"}},s._l(s.permissionGroupsItems,function(t,r){return e(p,{key:r,staticClass:"my-0"},[e(o,{staticClass:"pb-0",attrs:{order:"first",cols:"12"}},[e(y,{staticClass:"subtitle-1 px-0",staticStyle:{height:"25px"},domProps:{textContent:s._s(s.$vuetify.lang.t(t.name))}})],1),s._l(t.permissions,function(c,l){return[s._l(c,function(n,a){return[l==="view"?e(o,{key:`${r}_${l}_${a}`,staticClass:"py-0",attrs:{cols:"12",order:"0"}},[e(u,{attrs:{value:n.id,label:s.$vuetify.lang.t(n.name),disabled:s.hasRolePermissions(n.id),dense:"","hide-details":""},model:{value:s.permissions,callback:function(m){s.permissions=m},expression:"permissions"}})],1):e(o,{key:`${r}_${l}_${a}`,staticClass:"py-0",attrs:{cols:"auto"}},[e(u,{attrs:{value:n.id,label:s.$vuetify.lang.t(n.name),disabled:s.isViewSelected(t.id)||s.hasRolePermissions(n.id),"hide-details":"",dense:""},model:{value:s.permissions,callback:function(m){s.permissions=m},expression:"permissions"}})],1)]}),Object.keys(t.permissions).pop()!==l?e(o,{key:`${r}_${l}`,staticClass:"py-0",attrs:{cols:"12"}},[e($,{staticClass:"mt-2"})],1):s._e()]})],2)}),1)],1)},P=[],C=f(b,g,P,!1,null,null,null,null);const ns=C.exports;export{ns as default};
