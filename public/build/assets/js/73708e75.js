import{j as o,k as s,f as r}from"./590a28b7.js";import{C as n}from"./6208e2c9.js";import{n as i}from"./75131b1e.js";const h={name:"Page",components:{ComponentError:o,ComponentLoading:s},mixins:[r],beforeRouteUpdate(t,e,a){this.hasUpdateOnRouteChange&&this.getUpdateOnRouteChangeCondition(t,e)&&(this.component=n.empty(),this.getComponent(t)),a()},props:{value:{type:Object,default:()=>({data:{}})}},data(){return{component:{},route:this.value.data.route,loadState:this.value.data.loadState,vuexNamespace:this.value.data.vuexNamespace,refreshDelay:this.value.data.refreshDelay,updateOnRouteChange:this.value.data.updateOnRouteChange}},computed:{isLoad(){return Object.keys(this.overview).length!==0},overview(){return this.hasVuexNamespace()?this.$store.getters[`${this.vuexNamespace}/component`]:this.component}},created(){this.$loader.convertStringToRouteParams(),this.hasRoute()&&this.getComponent(),this.hasRefreshDelay()&&this.createRefresh(),this.hasLoadState()&&this.runLoadState()},beforeDestroy(){this.hasRefreshDelay()&&clearInterval(this.interval)},methods:{hasRoute(){return this.route!==void 0},hasVuexNamespace(){return this.vuexNamespace!==void 0},hasRefreshDelay(){return this.refreshDelay!==void 0},hasLoadState(){return this.loadState!==void 0},hasUpdateOnRouteChange(){return this.updateOnRouteChange!==void 0},createRoute(t){const e=this.route;return typeof e=="function"?e.call(this,{store:this.$store,route:t||this.$route}):e},createRefresh(){this.interval=setInterval(()=>{this.getComponent()},this.refreshDelay)},getComponent(t){const e=this.createRoute(t);this.hasVuexNamespace()?this.getComponentWithVuex(e):this.getComponentWithApi(e)},getComponentWithVuex(t){this.$store.dispatch(`${this.vuexNamespace}/component`,t)},getComponentWithApi(t){const e=new n({componentName:"ComponentError"});this.$api.call({url:t,method:"GET"}).then(a=>{this.component=a.data.component||e})},getLoadStateVuexNamespace(){switch(typeof this.loadState){case"boolean":return"";case"string":return this.loadState;default:return this.vuexNamespace}},getUpdateOnRouteChangeCondition(t,e){return typeof this.updateOnRouteChange=="function"?this.updateOnRouteChange.call(this,t,e):this.updateOnRouteChange},runLoadState(){const t=this.getLoadStateVuexNamespace();t!==void 0&&this.$loader.runStateAction(t)}}};var u=function(){var e=this,a=e._self._c;return a("div",[e.isLoad?a(e.overview.componentName,{tag:"component",attrs:{value:e.overview}}):[a("ComponentLoading")]],2)},p=[],d=i(h,u,p,!1,null,null,null,null);const f=d.exports;export{f as default};
