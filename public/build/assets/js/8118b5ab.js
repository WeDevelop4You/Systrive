import{m as u}from"./e7f3491a.js";import{C as c}from"./0d92c212.js";import{n as d}from"./75131b1e.js";import{_}from"./85b33148.js";import{a as m,d as n}from"./e49d6570.js";import{_ as h}from"./1a76431f.js";import{_ as f,a as v}from"./fda1b7fa.js";import{_ as p}from"./01ab5b81.js";import"./5dd91c54.js";import"./4cf2fa9d.js";import"./96434ee2.js";import"./7e4f6779.js";import"./27a2dbc0.js";import"./1b4d6d80.js";import"./144f342e.js";import"./43c2ae48.js";import"./3c8ef561.js";import"./ec463e66.js";import"./7dfb015d.js";import"./a32e6dc5.js";import"./b2c5c233.js";import"./f57264bf.js";import"./64b64aa2.js";import"./91db33cc.js";import"./af299172.js";import"./23ad9365.js";import"./2405caaf.js";import"./bb499c46.js";import"./0d3096cc.js";import"./69964234.js";const g={name:"CompanyUserForm",mixins:[c],data(){return{roles:[],permissions:[],rolesPermissions:[]}},computed:{isViewSelected(){return t=>t===null?!1:!this.permissions.includes(t)},hasRolePermissions(){return t=>this.rolesPermissions.includes(t)},...u({roleItems:"company/roles/listItems",permissionGroupsItems:"permissions/items"})},watch:{permissions:function(){this.data.roles=this.roles.map(t=>t.id),this.data.permissions=this.permissions.filter(t=>!this.rolesPermissions.includes(t))}},created(){this.$store.getters[`${this.vuexNamespace}/status`]==="ready"&&this.getData(),this.unwatch=this.$store.watch((t,s)=>s[`${this.vuexNamespace}/status`],t=>{switch(t){case"ready":this.getData()}})},beforeDestroy(){this.unwatch()},methods:{getData(){this.roles=this.data.roles,this.permissions=this.data.permissions,this.changeRolePermissions(this.data.roles)},changeRolePermissions(t){let s=t.map(r=>r.permissions);s=s.flat();let e=[...new Set([...this.permissions,...s])],i=this.rolesPermissions.filter(r=>!s.includes(r));this.rolesPermissions=s,this.permissions=e.filter(r=>!i.includes(r))}}};var $=function(){var s=this,e=s._self._c;return e(m,{attrs:{dense:""}},[s.isEditing?s._e():e(n,{attrs:{cols:"12"}},[e(h,{attrs:{"error-messages":s.errors.email,label:s.$vuetify.lang.t("$vuetify.word.email"),dense:"",outlined:"","hide-details":"auto"},on:{input:function(i){return s.clearError("email")}},model:{value:s.data.email,callback:function(i){s.$set(s.data,"email",i)},expression:"data.email"}})],1),e(n,{attrs:{cols:"12"}},[e(_,{attrs:{items:s.roleItems,label:s.$vuetify.lang.t("$vuetify.word.roles"),chips:"",dense:"",outlined:"",multiple:"","small-chips":"","hide-details":"","return-object":"","deletable-chips":"","item-text":"name"},on:{change:s.changeRolePermissions},model:{value:s.roles,callback:function(i){s.roles=i},expression:"roles"}})],1),e(n,{attrs:{cols:"12"}},s._l(s.permissionGroupsItems,function(i,r){return e(m,{key:r,staticClass:"my-0"},[e(n,{staticClass:"pb-0",attrs:{order:"first",cols:"12"}},[e(f,{staticClass:"subtitle-1 px-0",staticStyle:{height:"25px"},domProps:{textContent:s._s(s.$vuetify.lang.t(i.name))}})],1),s._l(i.permissions,function(o,l){return[i.id===o.id?e(n,{key:`${r}_${l}`,staticClass:"py-0",attrs:{cols:"12",order:"0"}},[e(p,{attrs:{value:o.id,label:s.$vuetify.lang.t(o.name),disabled:s.hasRolePermissions(o.id),dense:"","hide-details":""},model:{value:s.permissions,callback:function(a){s.permissions=a},expression:"permissions"}}),e(v,{staticClass:"mt-2"})],1):e(n,{key:`${r}_${l}`,staticClass:"py-0",attrs:{cols:"auto"}},[e(p,{attrs:{value:o.id,label:s.$vuetify.lang.t(o.name),disabled:s.isViewSelected(i.id)||s.hasRolePermissions(o.id),"hide-details":"",dense:""},model:{value:s.permissions,callback:function(a){s.permissions=a},expression:"permissions"}})],1)]})],2)}),1)],1)},y=[],b=d(g,$,y,!1,null,null,null,null);const Y=b.exports;export{Y as default};
