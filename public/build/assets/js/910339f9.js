import{D as n}from"./199060bd.js";import{F as p,_ as m}from"./3cabebd6.js";import{n as l}from"./75131b1e.js";import"./9c35b307.js";import"./f4c9f400.js";import"./dfc93a5e.js";import"./feafbc55.js";import"./8df457ab.js";import"./627c4e78.js";import"./419d1667.js";import"./4b49aa8e.js";import"./81c97ad2.js";import"./7f872bef.js";import"./f405985a.js";import"./95dd51c2.js";import"./4c8845d6.js";import"./bf7aa835.js";import"./51c71445.js";import"./712cfcfd.js";import"./9ac5599c.js";import"./e05367ee.js";import"./26688549.js";import"./76f91a17.js";import"./d0d927ab.js";import"./80b49b16.js";import"./8c1b3bb5.js";import"./92887c0f.js";import"./efa8d6c3.js";import"./08d53163.js";import"./1fec3443.js";import"./f57264bf.js";import"./c395c583.js";import"./06f2725c.js";import"./bb18b195.js";import"./4dbee51f.js";import"./0631847e.js";import"./0f1ce05e.js";import"./d342cd9d.js";import"./7d2f04f0.js";import"./fce81ff4.js";import"./11811950.js";import"./f55d25f8.js";function d(r){return{namespaced:!0,state:()=>({queue:[],coordinates:{}}),getters:{file(e){return e.queue.at(0)},coordinates(e){return e.coordinates}},mutations:{add(e,t){e.queue.push(t),r.modalCallback.call(this,!0)},setCoordinates(e,t){e.coordinates=t},remove(e){e.coordinates={},e.queue.splice(0,1),r.modalCallback.call(this,e.queue.length>0)}},actions:{cancel({commit:e}){e("remove")},save({commit:e,getters:t}){r.uploaderCallback.call(this,t.file,t.coordinates).then(()=>{e("remove")})}}}}const c={name:"ImageInput",components:{Dialog:n},extends:p,data(){return{dialog:this.value.data.dialog,vuexCropperNamespace:this.value.data.vuexCropperNamespace}},created(){this.$store.hasModule(this.getPath())||this.$store.registerModule(this.getPath(),d({modalCallback:r=>this.dialog.data.show=r,uploaderCallback:(r,{width:e,height:t,left:a,top:i})=>{const o=this.createFormData(r),s=this.createProgress(r.size);return o.append("width",e),o.append("height",t),o.append("left",a),o.append("top",i),this.uploader(o,s)}}))},beforeDestroy(){this.$store.unregisterModule(this.getPath())},methods:{getPath(){return this.vuexCropperNamespace.split("/")},handler(r){const e=`${this.vuexCropperNamespace}/add`;r instanceof Array?r.forEach(t=>{this.files.length<this.max&&this.$store.commit(e,t)}):this.$store.commit(e,r)}}};var u=function(){var e=this,t=e._self._c;return t("div",[t(m,e._b({class:[{"v-input-hidden":!e.isHidden},e.component.attributes.class],attrs:{clearable:!1,disabled:e.isDisabled||e.files.length>=e.max,label:e.component.content.label,"error-messages":e.errorMessages,error:e.component.data.error&&e.error,"hide-details":e.hideDetails},on:{change:e.handler},scopedSlots:e._u([{key:"selection",fn:function({index:a}){return[a===0?t("span",{staticClass:"text--secondary"},[e._v(" "+e._s(e.component.attributes.placeholder)+" ")]):e._e()]}}])},"v-file-input",e.component.attributes,!1)),t("files",{attrs:{max:e.max,files:e.files,"is-disabled":e.isDisabled},on:{remove:e.remove}}),t("Dialog",{attrs:{value:e.dialog}})],1)},h=[],f=l(c,u,h,!1,null,null,null,null);const ae=f.exports;export{ae as default};
