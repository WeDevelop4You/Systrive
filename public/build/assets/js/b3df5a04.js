import{F as _}from"./f54ba386.js";import{n as d}from"./75131b1e.js";import{_ as h}from"./92820de3.js";import{b as p,d as n}from"./10397c83.js";import{_ as f}from"./ddc45728.js";import{_ as c}from"./5683a2d4.js";import{_ as P}from"./fa6040c8.js";import"./e60bc734.js";import"./97d45361.js";import"./f55d25f8.js";import"./66747920.js";import"./8120e62c.js";import"./ec66acc7.js";import"./5eaf0fa2.js";import"./81675aae.js";import"./3b2a12b3.js";import"./5b3c2e28.js";import"./d66c24b9.js";import"./0f1ce05e.js";import"./9b90040d.js";import"./f57264bf.js";import"./d347382f.js";import"./4e148495.js";import"./f389e713.js";import"./51e51f33.js";import"./d392828f.js";import"./b679832c.js";import"./01675ed1.js";import"./4dfd685f.js";import"./bcd1e32a.js";import"./98dbeb61.js";import"./b621b831.js";import"./7a549336.js";import"./53f414c1.js";import"./ac801486.js";import"./3f642203.js";import"./eb5f8f4c.js";import"./ff7c325c.js";const b={name:"PermissionUserInput",extends:_,data(){return{roles:[],permissions:[],rolesPermissions:[]}},computed:{isViewSelected(){return e=>e===null?!1:!this.permissions.includes(e)},hasRolePermissions(){return e=>this.rolesPermissions.includes(e)}},watch:{permissions:function(){this.data.roles=this.roles.map(e=>e.id),this.data.permissions=this.permissions.filter(e=>!this.rolesPermissions.includes(e))}},created(){this.roles=this.data.roles,this.permissions=this.data.permissions,this.changeRolePermissions(this.data.roles)},methods:{changeRolePermissions(e){let s=e.map(t=>t.permissions);s=s.flat();let i=[...new Set([...this.permissions,...s])],o=this.rolesPermissions.filter(t=>!s.includes(t));this.rolesPermissions=s,this.permissions=i.filter(t=>!o.includes(t))}}};var v=function(){var s=this,i=s._self._c;return i(p,{attrs:{"no-gutters":""}},[i(n,{attrs:{cols:"12"}},[i(h,{attrs:{items:s.component.data.roles,label:s.component.content.label,chips:"",dense:"",outlined:"",multiple:"","small-chips":"","hide-details":"","return-object":"","deletable-chips":"","item-text":"name"},on:{change:s.changeRolePermissions},model:{value:s.roles,callback:function(o){s.roles=o},expression:"roles"}})],1),i(n,{attrs:{cols:"12"}},s._l(s.component.data.groups,function(o,t){return i(p,{key:t,staticClass:"my-0"},[i(n,{staticClass:"pb-0",attrs:{order:"first",cols:"12"}},[i(f,{staticClass:"subtitle-1 px-0",staticStyle:{height:"25px"},domProps:{textContent:s._s(o.name)}})],1),s._l(o.permissions,function(u,l){return[s._l(u,function(r,a){return[l==="view"?i(n,{key:`${t}_${l}_${a}`,staticClass:"py-0",attrs:{cols:"12",order:"0"}},[i(c,{attrs:{value:r.id,label:r.name,disabled:s.hasRolePermissions(r.id),dense:"","hide-details":""},model:{value:s.permissions,callback:function(m){s.permissions=m},expression:"permissions"}})],1):i(n,{key:`${t}_${l}_${a}`,staticClass:"py-0",attrs:{cols:"auto"}},[i(c,{attrs:{value:r.id,label:r.name,disabled:s.isViewSelected(o.id)||s.hasRolePermissions(r.id),"hide-details":"",dense:""},model:{value:s.permissions,callback:function(m){s.permissions=m},expression:"permissions"}})],1)]}),Object.keys(o.permissions).pop()!==l?i(n,{key:`${t}_${l}`,staticClass:"py-0",attrs:{cols:"12"}},[i(P,{staticClass:"mt-2"})],1):s._e()]})],2)}),1)],1)},g=[],C=d(b,v,g,!1,null,null,null,null);const ns=C.exports;export{ns as default};
